!function(){function n(n,t){var e=null;return function(){var r=Array.prototype.slice.call(arguments);e&&clearTimeout(e),e=setTimeout(function(){n.apply(null,r)},t)}}function t(n,t){return"["+n+'="'+t+'"]'}function e(n){return"."+n.split(" ").filter(function(n){return n.trim().length>0}).join(".")}function r(n){return n}function a(n,t){function e(){a.$el=a.$el||$("<div>").addClass(n),a.$margin=a.$margin=$("<div>").addClass(B),a.$el.append(a.$margin)}var r,a=this;a.append=function(n){a.$margin.append(n)},a.clear=function(){a.$margin.html("")},a.mountTo=function(n){r!==n&&(r=n,r.$el.append(a.$el))},a.getBlocks=function(){return a.$margin.children()},e()}function o(n){function t(){i.$el=i.$el||$("<div>").addClass(p),i.$el.append(i.header.$el).append(i.content.$el).append(i.footer.$el)}function e(){var n=i.header.$el,t=i.footer.$el,e=i.content.$margin,r=Math.max(n.length>0?n.height():0,parseInt(e.css("margin-top"))),a=Math.max(t.length>0?t.height():0,parseInt(e.css("margin-bottom")));return i.$el.height()-r-a}function r(){var n=i.header.$el,t=i.content.$margin,r=Math.max(n.length>0?n.height():0,parseInt(t.css("margin-top")));return r+e()}var o,i=this;i.header=new a(b,n),i.content=new a(k,n),i.footer=new a(C,n),i.hasBreaks=function(){return i.getOverflowBlocks().length>0},i.isBlank=function(){return i.content.$margin.children().length<1},i.getOverflowBlocks=function(){return i.content.getBlocks().filter(function(){var n=$(this),t=n.position().top,e=n.height();return t+e>r()})},i.unmount=function(){i.$el.remove()},i.mountTo=function(n){o!==n&&(o=n,o.view.$el.append(i.$el))},t()}function i(n){function r(){Q.pages.forEach(function(n,t){d(b,n,t),d(C,n,t)})}function a(n){return n===b||n===C}function i(n,t){return t===k?Y.content:n[t]}function c(n){switch(n){case b:return"margin-top";case C:return"margin-bottom"}return null}function u(n,t){return t===b||t===C?i(n,t).$el.height():0}function l(n,t){var e,r=c(t);r&&(e=u(n,t),n.content.$margin.css(r,e))}function s(n,t){var e=c(t);n.content.$margin.css(e,null)}function f(n,t){n.find(O+", "+I).each(function(n){$(this).attr(P,""+t+"."+n)})}function d(n,r,o){var c,u,d=A.getIndexForPage(n,o),h=a(n);u=i(r,n),u&&(h&&u.clear(),d<0||(c=A.getBlocks(n),h&&(c=c(d)),S=$(document.activeElement).attr(P)||S,c.each(function(n){var r=$(this),a=r;return f(r,n),h&&(a=r.clone(!0,!0)),!r.parents().is("body")||r.parents(e(w)).length>0?void a.off("change",O):($blockParent=r.parent(),$blockParent.addClass(y).attr(E,0),a.attr(P,n).data(T,$blockParent).removeClass(v).addClass(m).on("click",I,function(){var n=$(this);console.log(n)}).on("keypress",I,function(n){var t=$(this);13===n.which&&console.log(t,"keypress")}).on("change",O,function(n,e){var r,a=$(this);h&&(S=a.attr(P),r=$blockParent.find(t(P,S)),a.is("select")&&r.find("option").removeAttr("selected").filter(t("value",a.val())).attr("selected","selected"),r.val(a.val()).trigger(n.type,e))}),void u.append(a))}),u.getBlocks().length>0?l(r,n):s(r,n),G=u.$el.find(t(P,S)),G.length>0&&G[0].focus()))}function h(){A.$el.find(e(y)).each(function(n){$(this).attr(E,n)}),F.getBlocks("content").each(function(){var n=$(this),t=n.data(T);n.attr(E,t.attr(E))})}function g(){F.getBlocks("content").each(function(){var n,t,r=$(this);n=r.data(T),t=!n||n.hasClass(w)||n.parents(e(w)).length>0||!n.parents().is("body"),t&&r.remove()})}function p(t){var e=new o(n);t.blocks.each(function(){e.content.append($(this))}),Q.pages.slice(t.pageIndex+1).forEach(function(n){e.content.append(n.content.getBlocks())}),F.addPage(e)}function B(){var n=null;return Q.pages.forEach(function(t,e){t.hasBreaks()&&null===n&&(n={pageIndex:e,blocks:t.getOverflowBlocks()})}),n}function x(){var n=B();return null!==n&&(p(n),!0)}function j(){var n=[];Q.pages.forEach(function(t,e){t.isBlank()&&n.push(e)}),n.reverse().forEach(function(n){Q.pages.length<2||(Q.pages[n].unmount(),Q.pages.splice(n,1))})}function M(){F.$el.find(".content").find(".margin").children().sortElements(function(n,t){var e=parseInt($(n).attr(E)),r=parseInt($(t).attr(E));return e-r})}function N(){Q.pages.length>0||F.addPage(Y)}function L(){var n;do n=x(),r();while(n)}function q(n){Q.detachObserver(),z=!1,n(),setTimeout(function(){Q.attachObserver(),z=!0})}var A,F,Q,S,D=this,Y=new o(n),z=!1,G=[];D.render=function(){q(function(){Q.$el.trigger("paginator.renderstart"),N(),g(),d(k),h(),M(),L(),j(),L(),Q.$el.trigger("paginator.renderend")})},D.mountTo=function(n){Q=n,A=Q.model,F=Q.view}}function c(n){function t(){c.$el=c.$el||$("<div>").addClass(d),c.$watch||(c.$watch=c.$watch||$("<div>").addClass(g),c.$el.append(c.$watch))}function r(n,t){return c.$watch.find(e(t?n+" "+x:n))}function a(n){return r(n).length}function o(n,t){var e,o=a(n),c=-1,u=i.view.getPageCount(),l=u-1,s=r(n);if(1===o)switch(n){case b:return 0===t?0:-1;case C:return t===l?0:-1}e=0;do{if(c=(c+1)%o,0===t&&n===b||t===l&&n===C)return s.each(function(n){$(this).hasClass(x)&&(c=n)}),c;s.eq(c).hasClass(x)&&c++,e++}while(e<t);return c}var i,c=this;c.hasTerminalBlockContainer=function(n){return r(n,!0).length>0},c.getIndexForPage=function(n,t){return c.hasTerminalBlockContainer(n)?o(n,t):t%a(n)},c.getBlocks=function(n){switch(n){case b:case C:return function(t){var a=r(n).eq(t),o=a.hasClass(x),i=a.find(e(v));return o?i.addClass(x):i.removeClass(x)}}return r(n).find(e(v))},c.getOrderedBlocks=function(n){return r(n).find("["+E+"]")},c.mountTo=function(n){i!==n&&(i=n,i.$el.append(c.$el))},t()}function u(n){function t(){a.$el=a.$el||$("<div>").addClass(h)}function r(n,t){return isNaN(t)||null===t?void a.paginator.pages.push(n):void a.paginator.pages.splice(t,0,n)}var a=this;a.paginator=null,a.getPageCount=function(){return a.paginator.pages.length},a.getBlocks=function(n){return a.$el.find(e(n)).children(e(B)).children()},a.addPage=function(n,t){return r(n,t),n.mountTo(a.paginator),n},a.mountTo=function(n){a.paginator=n,a.paginator.$el.append(a.$el)},t()}function l(t,a){function o(){T.renderer.render()}function l(n){P()}function d(n){T.$el&&T.$el.removeClass(s),T.$el=n,T.$el.hasClass(s)||T.$el.addClass(s).removeClass(f)}function h(){var n;T.model.mountTo(T),n=T.$el.find([e(b),e(k),e(C)].join(",")),T.model.$watch.append(n)}function g(){T.view.mountTo(T)}function p(){T.renderer.mountTo(T)}function $(){E||(T.attachObserver(),E=!0)}function v(){y||(T.attachEventListeners(),y=!0)}function m(){$(),v()}function w(){o()}var B,T=this,x=new MutationObserver(l),y=!1,E=!1,P=n(o,j);return a=new r(a),T.model=new c(a),T.view=new u(a),T.renderer=new i(a),T.pages=T.pages||[],T.detachObserver=function(){x.disconnect()},T.attachObserver=function(){x.observe(T.model.$watch[0],{childList:!0,attributes:!0,characterData:!0,subtree:!0})},T.attachEventListeners=function(){T.model.$watch.on("change",O,function(n){E&&l(n)})},B=function(){return{observe:m,refresh:w}}(),d(t),h(),g(),p(),m(),t.data("paginator",B),B}var s="paginator-component",f="paginator-unpaginated",d="model",h="view",g="watch",p="page",v="page-block",m="page-added",w="page-deleted",k="content",b="header",C="footer",B="margin",T="parent",x="-terminal",y="block-parent",E="data-order",P="data-element-id",O="input, select, textarea, button, a, meter",I='[tabindex="0"]',j=250;jQuery.fn.findShallow=function(n){return function n(t,e){var r=t.children();if(r.length){var a=r.filter(e);return a.length?a.first():n(r,e)}return $()}(this,n)},jQuery.fn.sortElements=function(){var n=[].sort;return function(t,e){e=e||function(){return this};var r=this.map(function(){var n=e.call(this),t=n.parentNode,r=t.insertBefore(document.createTextNode(""),n.nextSibling);return function(){if(t===this)throw new Error("You can't sort elements if any one is a descendant of another.");t.insertBefore(this,r),t.removeChild(r)}});return n.call(this,t).each(function(n){r[n].call(e.call(this))})}}(),$.fn.paginate=function(n){return new l(this,n)}}();
//# sourceMappingURL=jquery-paginator.min.js.map
