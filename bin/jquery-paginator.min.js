!function(){function n(n){return"."+n.split(" ").filter(function(n){return n.trim().length>0}).join(".")}function e(n){return n}function t(n,e){function t(){r.$el=r.$el||$("<div>").addClass(n),r.$margin=r.$margin=$("<div>").addClass(C),r.$el.append(r.$margin)}var a,r=this;r.append=function(n){r.$margin.append(n)},r.clear=function(){r.$margin.html("")},r.mountTo=function(n){a!==n&&(a=n,a.$el.append(r.$el))},r.getBlocks=function(){return r.$margin.children()},t()}function a(e){function a(){c.$el=c.$el||$("<div>").addClass(h),c.$el.append(c.header.$el).append(c.content.$el).append(c.footer.$el)}function r(){var e=c.$el.find(n(w)),t=c.$el.find(n(k)),a=c.content.$margin,r=Math.max(e.length>0?e.height():0,parseInt(a.css("margin-top"))),o=Math.max(t.length>0?t.height():0,parseInt(a.css("margin-bottom")));return c.$el.height()-r-o}function o(){return parseInt(c.content.$el.css("margin-top"))+r()}var i,c=this;c.header=new t(w,e),c.content=new t(m,e),c.footer=new t(k,e),c.hasBreaks=function(){return c.getOverflowBlocks().length>0},c.isBlank=function(){return c.content.$margin.children().length<1},c.getOverflowBlocks=function(){return c.content.getBlocks().filter(function(){var n=$(this),e=n.position().top,t=n.height();return e+t>o()})},c.unmount=function(){c.$el.remove()},c.mountTo=function(n){i!==n&&(i=n,i.view.$el.append(c.$el))},a()}function r(e){function t(){C.pages.forEach(function(n,e){r(w,n,e),r(k,n,e)})}function r(e,t,a){var r,o=f.getIndexForPage(e,a),i=!1;switch(e){case k:t.footer.clear(),r=f.getBlocks(e)(o),i=!0;break;case w:t.header.clear(),r=f.getBlocks(e)(o),i=!0;break;default:r=f.getBlocks(e)}switch(r.each(function(){var a=$(this),r=a;if(i&&(r=a.clone(!0,!0)),!(a.parents(n(v)).length>0)){switch($blockParent=a.parent(),$blockParent.addClass(T).attr(P,0),r.data(b,$blockParent).removeClass(g).addClass(p),e){case w:return void t.header.append(r);case k:return void t.footer.append(r)}x.content.append(r)}}),e){case w:t.content.$margin.css("margin-top",t.$el.find(n(e)).height());break;case k:t.content.$margin.css("margin-bottom",t.$el.find(n(e)).height())}}function o(){f.$el.find(n(T)).each(function(n){$(this).attr(P,n)}),h.getBlocks("content").each(function(){var n=$(this),e=n.data(b);n.attr(P,e.attr(P))})}function i(){h.getBlocks("content").each(function(){var e,t,a=$(this);e=a.data(b),t=!e||e.hasClass(v)||e.parents(n(v)).length>0,t&&a.remove()})}function c(n){var t=new a(e);n.blocks.each(function(){t.content.append($(this))}),C.pages.slice(n.pageIndex+1).forEach(function(n){t.content.append(n.content.getBlocks())}),h.addPage(t)}function s(){var n=null;return C.pages.forEach(function(e,t){e.hasBreaks()&&null===n&&(n={pageIndex:t,blocks:e.getOverflowBlocks()})}),n}function l(){var n=s();return null!==n&&(c(n),!0)}function u(){var n=[];C.pages.forEach(function(e,t){e.isBlank()&&n.push(t)}),n.reverse().forEach(function(n){C.pages[n].unmount(),C.pages.splice(n,1)})}function d(){h.$el.find(".content").find(".margin").children().sortElements(function(n,e){var t=parseInt($(n).attr(P)),a=parseInt($(e).attr(P));return t-a})}var f,h,C,B=this,x=new a(e),I=!1;I=!1,B.render=function(){C.detachObserver(),C.pages.length<1&&h.addPage(x);var n;i(),r(m),o();do n=l(),t();while(n);u(),t(),d(),C.observeModel()},B.mountTo=function(n){C=n,f=C.model,h=C.view,B.render()}}function o(e){function t(){c.$el=c.$el||$("<div>").addClass(u),c.$watch||(c.$watch=c.$watch||$("<div>").addClass(f),c.$el.append(c.$watch))}function a(e,t){return c.$watch.children(n(t?e+" "+B:e))}function r(n){return a(n).length}function o(n,e){var t,o,c,s,l=a(n).eq(0);for(t=0,o=0;t<i.pages.length;t++,o=(o+1)%r(w),l=l.next())if(l||(l=a(n).eq(0)),c=n===w&&l.hasClass(B),s=n===k&&l.hasClass(B),(c&&e>0||s&&e<i.view.getPageCount()-1)&&++o,t===e||c&&0===e||s&&e===i.view.getPageCount()-1)return o}var i,c=this;c.hasTerminalBlockContainer=function(n){return a(n,!0).length>0},c.getIndexForPage=function(n,e){return c.hasTerminalBlockContainer(n)?o(n,e):e%r(n)},c.getBlocks=function(e){switch(e){case w:case k:return function(t){var r=a(e).eq(t),o=r.hasClass(B),i=r.find(n(g));return o?i.addClass(B):i.removeClass(B)}}return a(e).find(n(g))},c.getOrderedBlocks=function(n){return a(n).find("["+P+"]")},c.mountTo=function(n){i!==n&&(i=n,i.$el.append(c.$el))},t()}function i(e){function t(){r.$el=r.$el||$("<div>").addClass(d)}function a(n,e){return isNaN(e)||null===e?void r.paginator.pages.push(n):void r.paginator.pages.splice(e,0,n)}var r=this;r.paginator=null,r.getPageCount=function(){return r.paginator.pages.length},r.getBlocks=function(e){return r.$el.find(n(e)).children(n(C)).children()},r.addPage=function(n,e){return a(n,e),n.mountTo(r.paginator),n},r.mountTo=function(n){r.paginator=n,r.paginator.$el.append(r.$el)},t()}function c(n){function t(){m.renderer.render()}function a(n){m.$el&&m.$el.removeClass(s),m.$el=n,m.$el.hasClass(s)||m.$el.addClass(s).removeClass(l)}function c(){m.model.mountTo(m),m.model.$watch.append(m.$el.children().filter(function(){var n=$(this);return!(n.hasClass(u)||n.hasClass(d)||n.hasClass(f))}))}function h(){m.view.mountTo(m)}function g(){m.renderer.mountTo(m)}var p,v,m=this;n=new e(n),p=new MutationObserver(t),m.model=new o(n),m.view=new i(n),m.renderer=new r(n),m.pages=m.pages||[],m.detachObserver=function(){p.disconnect()},m.observeModel=function(){p.observe(m.model.$watch[0],{childList:!0,attributes:!0,characterData:!0,subtree:!0})},v={refresh:function(){t()}},m.bindTo=function(n){a(n),c(),h(),g(),t(),n.data("paginator",v)}}var s="paginator-component",l="paginator-unpaginated",u="model",d="view",f="watch",h="page",g="page-block",p="page-added",v="page-deleted",m="content",w="header",k="footer",C="margin",b="parent",B="-terminal",T="block-parent",P="data-order";jQuery.fn.sortElements=function(){var n=[].sort;return function(e,t){t=t||function(){return this};var a=this.map(function(){var n=t.call(this),e=n.parentNode,a=e.insertBefore(document.createTextNode(""),n.nextSibling);return function(){if(e===this)throw new Error("You can't sort elements if any one is a descendant of another.");e.insertBefore(this,a),e.removeChild(a)}});return n.call(this,e).each(function(n){a[n].call(t.call(this))})}}(),$.fn.paginate=function(n){new c(n).bindTo(this)}}();
//# sourceMappingURL=jquery-paginator.min.js.map
