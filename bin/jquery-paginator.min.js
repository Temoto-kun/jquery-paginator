!function(){var n=function(n,e){function t(){var t,a,r,d=n.find(".model").find(".header"),s=d.length;s<1||(r=e%s,t=d.eq(r).clone(!0,!0),t.hasClass("terminal")&&e>0||(a=$("<div>"),a.addClass("margin"),t.children().each(function(){a.append(this)}),t.append(a),i.prepend(t),setTimeout(function(){o.css("margin-top",t.height())})))}function a(){var t,a,r,d=n.find(".model").find(".footer"),s=d.length;s<1||(a=e%s,t=d.eq(a).clone(!0,!0),console.log(t.hasClass("terminal"),e,n.data("lastPageNumber")),t.hasClass("terminal")&&e<n.data("lastPageNumber")-1||(r=$("<div>"),r.addClass("margin"),t.children().each(function(){r.append(this)}),t.append(r),i.append(t),setTimeout(function(){o.css("margin-bottom",t.height())})))}var i=$("<div>"),o=$("<div>"),r=$("<div>");return r.addClass("margin"),e=e||n.data("lastPageNumber"),o.addClass("content").append(r),i.getContentHeight=function(){var n=this.find(".header"),e=this.find(".footer"),t=Math.max(n.length>0?n.height():0,parseInt(r.css("margin-top"))),a=Math.max(e.length>0?e.height():0,parseInt(r.css("margin-top")));return console.log(this,this.height()),this.height()-t-a},i.needsBreaking=function(){return o.height()>this.getContentHeight()},i.setPageNumber=function(n){this.data("pageNumber",n),this.find(".header").remove(),this.find(".footer").remove(),t(),a()},i.addClass("page").append(o),i.setPageNumber(e),i};$.fn.paginate=function(){function e(n){return"."+n.split(" ").filter(function(n){return n.trim().length>0}).join(".")}function t(){g.find(e(v)).each(function(){var n=$(this),t=n.parent();n.parents(e(b)).length>0||(t.attr("data-order",0),n.data("$modelParent",t).removeClass(v).addClass(C),P.push(t),m[0].find(".content").find(".margin").append(n))}),g.find("[data-order]").each(function(n){$(this).attr("data-order",n)}),l.find(".content").find(".margin").children().each(function(){var n=$(this),t=n.data("$modelParent");return t.hasClass(b)||t.parents().length<1||t.parents(e(b)).length>0?void n.remove():void("none"===n.css("float")&&n.attr("data-order",t.attr("data-order")))})}function a(){}function i(){function e(){var n=[];return m.forEach(function(e,t){var a=e.getContentHeight(),i=!1;return e.find(".content").find(".margin").children().each(function(){var n=$(this),t=n.position().top,o=n.height(),r=parseInt(e.find(".content").css("margin-top"))+a;console.log(n,t+o,r,a),i=i||t+o>r}),i?(e.addClass("-overflow"),void n.push(t)):void e.removeClass("-overflow")}),n}function t(e){e.forEach(function(e){var t=[],a=m[e],i=a.getContentHeight();for(a.find(".content").find(".margin").children().each(function(){var n=$(this),e=n.position().top,o=n.height(),r=parseInt(a.find(".content").css("margin-top")),d=r+i;e+o>d&&t.unshift(this)});t.length>0;)m[e+1]||l.append(m[e+1]=new n(c,e+1)),m[e+1].find(".content").find(".margin").prepend(t.shift()),c.data("lastPageNumber",e+1)})}var a;do t(a=e()),console.log(a);while(a.length>0)}function o(){m.forEach(function(n,e){n.removeAttr("hidden").setPageNumber(e)})}function r(){m.forEach(function(n,e){n.find(".content").find(".margin").children().length>0||e<1||n.attr("hidden","")})}function d(){c.trigger("paginator.pagenumberchange",{lastPageNumber:p}),c.data("lastPageNumber",l.find(".page").length)}function s(){if(c.data("_isRendering",!0),d(),!m[p]&&(l.append(m[p]=new n(c,p)),"auto"===l.find(".page").css("height")))throw new Error("Page dimensions should be explicitly set up! Either you have not included the default style or pages' dimensions have been set to auto.");o(),t(),a(),i(),r(),setTimeout(function(){c.data("_isRendering",!1)})}function h(){c.data("_isRendering")||setTimeout(function(){s(),setTimeout(function(){c.trigger("paginator.modelchange",{})})})}var c=this,g=$("<div>"),f=$("<div>"),l=$("<div>"),u=new MutationObserver(h),p=0,m=[],v="page-block",C="page-added",b="page-deleted",P=[];f.addClass("watch").append(c.children()),u.observe(f[0],{childList:!0,attributes:!0,characterData:!0,subtree:!0}),g.addClass("model").append(f),l.addClass("view").append(m[0]),c.addClass("paginator-component").append(g).append(l),setTimeout(function(){s()})}}();
//# sourceMappingURL=jquery-paginator.min.js.map
