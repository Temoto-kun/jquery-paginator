!function(){function n(n,e){var t=null;return function(){var r=Array.prototype.slice.call(arguments);t&&clearTimeout(t),t=setTimeout(function(){n.apply(null,r)},e)}}function e(n,e){return"["+n+'="'+e+'"]'}function t(n){return"."+n.split(" ").filter(function(n){return n.trim().length>0}).join(".")}function r(n){return n}function a(n,e){function t(){a.$el=a.$el||$("<div>").addClass(n),a.$margin=a.$margin=$("<div>").addClass(B),a.$el.append(a.$margin)}var r,a=this;a.append=function(n){a.$margin.append(n)},a.clear=function(){a.$margin.html("")},a.mountTo=function(n){r!==n&&(r=n,r.$el.append(a.$el))},a.getBlocks=function(){return a.$margin.children()},t()}function o(n){function e(){i.$el=i.$el||$("<div>").addClass(p),i.$el.append(i.header.$el).append(i.content.$el).append(i.footer.$el)}function t(){var n=i.header.$el,e=i.footer.$el,t=i.content.$margin,r=Math.max(n.length>0?n.height():0,parseInt(t.css("margin-top"))),a=Math.max(e.length>0?e.height():0,parseInt(t.css("margin-bottom")));return i.$el.height()-r-a}function r(){var n=i.header.$el,e=i.content.$margin,r=Math.max(n.length>0?n.height():0,parseInt(e.css("margin-top")));return r+t()}var o,i=this;i.header=new a(b,n),i.content=new a(k,n),i.footer=new a(C,n),i.hasBreaks=function(){return i.getOverflowBlocks().length>0},i.isBlank=function(){return i.content.$margin.children().length<1},i.getOverflowBlocks=function(){return i.content.getBlocks().filter(function(){var n=$(this),e=n.position().top,t=n.height();return e+t>r()})},i.unmount=function(){i.$el.remove()},i.mountTo=function(n){o!==n&&(o=n,o.view.$el.append(i.$el))},e()}function i(n){function r(){A.pages.forEach(function(n,e){f(b,n,e),f(C,n,e)})}function a(n){return n===b||n===C}function i(n,e){switch(e){case b:return n.header;case C:return n.footer;case k:return Q.content}return null}function c(n){switch(n){case b:return"margin-top";case C:return"margin-bottom"}return null}function u(n,e){switch(e){case b:case C:return i(n,e).$el.height()}return 0}function s(n,e){var t,r=c(e);r&&(t=u(e),n.content.$margin.css(r,t))}function l(n,e){n.find(y).each(function(n){$(this).attr(O,""+e+"."+n)})}function f(n,r,o){var c,u,f=L.getIndexForPage(n,o),d=a(n);u=i(r,n),u&&(d&&u.clear(),f<0||(c=L.getBlocks(n),d&&(c=c(f)),c.each(function(n){var r,a=$(this),o=a;return l(a),d&&(o=a.clone(!0,!0)),!a.parents().is("body")||a.parents(t(w)).length>0?void o.off("change",y):($blockParent=a.parent(),$blockParent.addClass(P).attr(E,0),o.attr(O,n).data(T,$blockParent).removeClass(v).addClass(m).on("change",y,function(n,t){var a,o=$(this);d&&(r=o.attr(O),a=$blockParent.find(e(O,r)),o.is("select")&&a.find("option").removeAttr("selected").filter(e("value",o.val())).attr("selected","selected"),a.val(o.val()).trigger(n.type,t))}),void u.append(o))}),s(n)))}function d(){L.$el.find(t(P)).each(function(n){$(this).attr(E,n)}),q.getBlocks("content").each(function(){var n=$(this),e=n.data(T);n.attr(E,e.attr(E))})}function h(){q.getBlocks("content").each(function(){var n,e,r=$(this);n=r.data(T),e=!n||n.hasClass(w)||n.parents(t(w)).length>0||!n.parents().is("body"),e&&r.remove()})}function g(e){var t=new o(n);e.blocks.each(function(){t.content.append($(this))}),A.pages.slice(e.pageIndex+1).forEach(function(n){t.content.append(n.content.getBlocks())}),q.addPage(t)}function p(){var n=null;return A.pages.forEach(function(e,t){e.hasBreaks()&&null===n&&(n={pageIndex:t,blocks:e.getOverflowBlocks()})}),n}function B(){var n=p();return null!==n&&(g(n),!0)}function x(){var n=[];A.pages.forEach(function(e,t){e.isBlank()&&n.push(t)}),n.reverse().forEach(function(n){A.pages.length<2||(A.pages[n].unmount(),A.pages.splice(n,1))})}function I(){q.$el.find(".content").find(".margin").children().sortElements(function(n,e){var t=parseInt($(n).attr(E)),r=parseInt($(e).attr(E));return t-r})}function j(){A.pages.length>0||q.addPage(Q)}function M(){var n;do n=B(),r();while(n)}function N(n){A.detachObserver(),S=!1,n(),setTimeout(function(){A.attachObserver(),S=!0})}var L,q,A,F=this,Q=new o(n),S=!1;F.render=function(){N(function(){j(),h(),f(k),d(),I(),M(),x(),M()})},F.mountTo=function(n){A=n,L=A.model,q=A.view}}function c(n){function e(){c.$el=c.$el||$("<div>").addClass(d),c.$watch||(c.$watch=c.$watch||$("<div>").addClass(g),c.$el.append(c.$watch))}function r(n,e){return c.$watch.find(t(e?n+" "+x:n))}function a(n){return r(n).length}function o(n,e){var t,o=a(n),c=-1,u=i.view.getPageCount(),s=u-1,l=r(n);if(1===o)switch(n){case b:return 0===e?0:-1;case C:return e===s?0:-1}t=0;do{if(c=(c+1)%o,0===e&&n===b||e===s&&n===C)return l.each(function(n){$(this).hasClass(x)&&(c=n)}),c;l.eq(c).hasClass(x)&&c++,t++}while(t<e);return c}var i,c=this;c.hasTerminalBlockContainer=function(n){return r(n,!0).length>0},c.getIndexForPage=function(n,e){return c.hasTerminalBlockContainer(n)?o(n,e):e%a(n)},c.getBlocks=function(n){switch(n){case b:case C:return function(e){var a=r(n).eq(e),o=a.hasClass(x),i=a.find(t(v));return o?i.addClass(x):i.removeClass(x)}}return r(n).find(t(v))},c.getOrderedBlocks=function(n){return r(n).find("["+E+"]")},c.mountTo=function(n){i!==n&&(i=n,i.$el.append(c.$el))},e()}function u(n){function e(){a.$el=a.$el||$("<div>").addClass(h)}function r(n,e){return isNaN(e)||null===e?void a.paginator.pages.push(n):void a.paginator.pages.splice(e,0,n)}var a=this;a.paginator=null,a.getPageCount=function(){return a.paginator.pages.length},a.getBlocks=function(n){return a.$el.find(t(n)).children(t(B)).children()},a.addPage=function(n,e){return r(n,e),n.mountTo(a.paginator),n},a.mountTo=function(n){a.paginator=n,a.paginator.$el.append(a.$el)},e()}function s(e,a){function o(){T.renderer.render()}function s(n){O()}function d(n){T.$el&&T.$el.removeClass(l),T.$el=n,T.$el.hasClass(l)||T.$el.addClass(l).removeClass(f)}function h(){var n;T.model.mountTo(T),n=T.$el.find([t(b),t(k),t(C)].join(",")),T.model.$watch.append(n)}function g(){T.view.mountTo(T)}function p(){T.renderer.mountTo(T)}function $(){E||(T.attachObserver(),E=!0)}function v(){P||(T.attachEventListeners(),P=!0)}function m(){$(),v()}function w(){o()}var B,T=this,x=new MutationObserver(s),P=!1,E=!1,O=n(o,I);return a=new r(a),T.model=new c(a),T.view=new u(a),T.renderer=new i(a),T.pages=T.pages||[],T.detachObserver=function(){x.disconnect()},T.attachObserver=function(){x.observe(T.model.$watch[0],{childList:!0,attributes:!0,characterData:!0,subtree:!0})},T.attachEventListeners=function(){T.model.$watch.on("change","input, select, textarea",function(n){E&&s(n)})},B=function(){return{observe:m,refresh:w}}(),d(e),h(),g(),p(),m(),e.data("paginator",B),B}var l="paginator-component",f="paginator-unpaginated",d="model",h="view",g="watch",p="page",v="page-block",m="page-added",w="page-deleted",k="content",b="header",C="footer",B="margin",T="parent",x="-terminal",P="block-parent",E="data-order",O="data-element-id",y="input, select, textarea, button, a, meter",I=250;jQuery.fn.findShallow=function(n){return function n(e,t){var r=e.children();if(r.length){var a=r.filter(t);return a.length?a.first():n(r,t)}return $()}(this,n)},jQuery.fn.sortElements=function(){var n=[].sort;return function(e,t){t=t||function(){return this};var r=this.map(function(){var n=t.call(this),e=n.parentNode,r=e.insertBefore(document.createTextNode(""),n.nextSibling);return function(){if(e===this)throw new Error("You can't sort elements if any one is a descendant of another.");e.insertBefore(this,r),e.removeChild(r)}});return n.call(this,e).each(function(n){r[n].call(t.call(this))})}}(),$.fn.paginate=function(n){return new s(this,n)}}();
//# sourceMappingURL=jquery-paginator.min.js.map
