!function(){function n(n,e){var t=null;return function(){var r=Array.prototype.slice.call(arguments);t&&clearTimeout(t),t=setTimeout(function(){n.apply(null,r)},e)}}function e(n,e){return"["+n+'="'+e+'"]'}function t(n){return"."+n.split(" ").filter(function(n){return n.trim().length>0}).join(".")}function r(n){return n}function a(n,e){function t(){a.$el=a.$el||$("<div>").addClass(n),a.$margin=a.$margin=$("<div>").addClass(B),a.$el.append(a.$margin)}var r,a=this;a.append=function(n){a.$margin.append(n)},a.clear=function(){a.$margin.html("")},a.mountTo=function(n){r!==n&&(r=n,r.$el.append(a.$el))},a.getBlocks=function(){return a.$margin.children()},t()}function o(n){function e(){i.$el=i.$el||$("<div>").addClass(p),i.$el.append(i.header.$el).append(i.content.$el).append(i.footer.$el)}function t(){var n=i.header.$el,e=i.footer.$el,t=i.content.$margin,r=Math.max(n.length>0?n.height():0,parseInt(t.css("margin-top"))),a=Math.max(e.length>0?e.height():0,parseInt(t.css("margin-bottom")));return i.$el.height()-r-a}function r(){var n=i.header.$el,e=i.content.$margin,r=Math.max(n.length>0?n.height():0,parseInt(e.css("margin-top")));return r+t()}var o,i=this;i.header=new a(b,n),i.content=new a(k,n),i.footer=new a(C,n),i.hasBreaks=function(){return i.getOverflowBlocks().length>0},i.isBlank=function(){return i.content.$margin.children().length<1},i.getOverflowBlocks=function(){return i.content.getBlocks().filter(function(){var n=$(this),e=n.position().top,t=n.height();return e+t>r()})},i.unmount=function(){i.$el.remove()},i.mountTo=function(n){o!==n&&(o=n,o.view.$el.append(i.$el))},e()}function i(n){function r(){Q.pages.forEach(function(n,e){d(b,n,e),d(C,n,e)})}function a(n){return n===b||n===C}function i(n,e){return e===k?Y.content:n[e]}function c(n){switch(n){case b:return"margin-top";case C:return"margin-bottom"}return null}function u(n,e){return e===b||e===C?i(n,e).$el.height():0}function l(n,e){var t,r=c(e);r&&(t=u(n,e),n.content.$margin.css(r,t))}function s(n,e){var t=c(e);n.content.$margin.css(t,null)}function f(n,e){n.find(O+", "+I).each(function(n){$(this).attr(P,""+e+"."+n)})}function d(n,r,o){var c,u,d=A.getIndexForPage(n,o),h=a(n);u=i(r,n),u&&(h&&u.clear(),d<0||(c=A.getBlocks(n),h&&(c=c(d)),S=$(document.activeElement).attr(P)||S,c.each(function(n){var r=$(this),a=r;return f(r,n),h&&(a=r.clone(!0,!0)),!r.parents().is("body")||r.parents(t(w)).length>0?void a.off("change",O):($blockParent=r.parent(),$blockParent.addClass(x).attr(E,0),a.attr(P,n).data(T,$blockParent).removeClass(v).addClass(m).on("click",I,function(){var n=$(this);console.log(n)}).on("keypress",I,function(n){var e=$(this);13===n.which&&console.log(e,"keypress")}).on("change",O,function(n,t){var r,a=$(this);h&&(S=a.attr(P),r=$blockParent.find(e(P,S)),a.is("select")&&r.find("option").removeAttr("selected").filter(e("value",a.val())).attr("selected","selected"),r.val(a.val()).trigger(n.type,t))}),void u.append(a))}),u.getBlocks().length>0?l(r,n):s(r,n),G=u.$el.find(e(P,S)),G.length>0&&G[0].focus()))}function h(){A.$el.find(t(x)).each(function(n){$(this).attr(E,n)}),F.getBlocks("content").each(function(){var n=$(this),e=n.data(T);n.attr(E,e.attr(E))})}function g(){F.getBlocks("content").each(function(){var n,e,r=$(this);n=r.data(T),e=!n||n.hasClass(w)||n.parents(t(w)).length>0||!n.parents().is("body"),e&&r.remove()})}function p(e){var t=new o(n);e.blocks.each(function(){t.content.append($(this))}),Q.pages.slice(e.pageIndex+1).forEach(function(n){t.content.append(n.content.getBlocks())}),F.addPage(t)}function B(){var n=null;return Q.pages.forEach(function(e,t){e.hasBreaks()&&null===n&&(n={pageIndex:t,blocks:e.getOverflowBlocks()})}),n}function y(){var n=B();return null!==n&&(p(n),!0)}function j(){var n=[];Q.pages.forEach(function(e,t){e.isBlank()&&n.push(t)}),n.reverse().forEach(function(n){Q.pages.length<2||(Q.pages[n].unmount(),Q.pages.splice(n,1))})}function L(){F.$el.find(".content").find(".margin").children().sortElements(function(n,e){var t=parseInt($(n).attr(E)),r=parseInt($(e).attr(E));return t-r})}function M(){Q.pages.length>0||F.addPage(Y)}function N(){var n;do n=y(),r();while(n)}function q(n){Q.detachObserver(),z=!1,n(),setTimeout(function(){Q.attachObserver(),z=!0})}var A,F,Q,S,D=this,Y=new o(n),z=!1,G=[];D.render=function(){function n(){M(),g(),d(k),h(),L(),N(),j(),N()}q(function(){Q.$el.trigger("paginator.renderstart"),n(),Q.$el.imagesLoaded().always(function(){n(),Q.$el.trigger("paginator.renderend")})})},D.mountTo=function(n){Q=n,A=Q.model,F=Q.view}}function c(n){function e(){c.$el=c.$el||$("<div>").addClass(d),c.$watch||(c.$watch=c.$watch||$("<div>").addClass(g),c.$el.append(c.$watch))}function r(n,e){return c.$watch.find(t(e?n+" "+y:n))}function a(n){return r(n).length}function o(n,e){var t,o=a(n),c=-1,u=i.view.getPageCount(),l=u-1,s=r(n);if(1===o)switch(n){case b:return 0===e?0:-1;case C:return e===l?0:-1}t=0;do{if(c=(c+1)%o,0===e&&n===b||e===l&&n===C)return s.each(function(n){$(this).hasClass(y)&&(c=n)}),c;s.eq(c).hasClass(y)&&c++,t++}while(t<e);return c}var i,c=this;c.hasTerminalBlockContainer=function(n){return r(n,!0).length>0},c.getIndexForPage=function(n,e){return c.hasTerminalBlockContainer(n)?o(n,e):e%a(n)},c.getBlocks=function(n){switch(n){case b:case C:return function(e){var a=r(n).eq(e),o=a.hasClass(y),i=a.find(t(v));return o?i.addClass(y):i.removeClass(y)}}return r(n).find(t(v))},c.getOrderedBlocks=function(n){return r(n).find("["+E+"]")},c.mountTo=function(n){i!==n&&(i=n,i.$el.append(c.$el))},e()}function u(n){function e(){a.$el=a.$el||$("<div>").addClass(h)}function r(n,e){return isNaN(e)||null===e?void a.paginator.pages.push(n):void a.paginator.pages.splice(e,0,n)}var a=this;a.paginator=null,a.getPageCount=function(){return a.paginator.pages.length},a.getBlocks=function(n){return a.$el.find(t(n)).children(t(B)).children()},a.addPage=function(n,e){return r(n,e),n.mountTo(a.paginator),n},a.mountTo=function(n){a.paginator=n,a.paginator.$el.append(a.$el)},e()}function l(e,a){function o(){T.renderer.render()}function l(n){P()}function d(n){T.$el&&T.$el.removeClass(s),T.$el=n,T.$el.hasClass(s)||T.$el.addClass(s).removeClass(f)}function h(){var n;T.model.mountTo(T),n=T.$el.find([t(b),t(k),t(C)].join(",")),T.model.$watch.append(n)}function g(){T.view.mountTo(T)}function p(){T.renderer.mountTo(T)}function $(){E||(T.attachObserver(),E=!0)}function v(){x||(T.attachEventListeners(),x=!0)}function m(){$(),v()}function w(){o()}var B,T=this,y=new MutationObserver(l),x=!1,E=!1,P=n(o,j);return a=new r(a),T.model=new c(a),T.view=new u(a),T.renderer=new i(a),T.pages=T.pages||[],T.detachObserver=function(){y.disconnect()},T.attachObserver=function(){y.observe(T.model.$watch[0],{childList:!0,attributes:!0,characterData:!0,subtree:!0})},T.attachEventListeners=function(){T.model.$watch.on("change",O,function(n){E&&l(n)})},B=function(){return{observe:m,refresh:w}}(),d(e),h(),g(),p(),m(),e.data("paginator",B),B}var s="paginator-component",f="paginator-unpaginated",d="model",h="view",g="watch",p="page",v="page-block",m="page-added",w="page-deleted",k="content",b="header",C="footer",B="margin",T="parent",y="-terminal",x="block-parent",E="data-order",P="data-element-id",O="input, select, textarea, button, a, meter",I='[tabindex="0"]',j=250;jQuery.fn.findShallow=function(n){return function n(e,t){var r=e.children();if(r.length){var a=r.filter(t);return a.length?a.first():n(r,t)}return $()}(this,n)},jQuery.fn.sortElements=function(){var n=[].sort;return function(e,t){t=t||function(){return this};var r=this.map(function(){var n=t.call(this),e=n.parentNode,r=e.insertBefore(document.createTextNode(""),n.nextSibling);return function(){if(e===this)throw new Error("You can't sort elements if any one is a descendant of another.");e.insertBefore(this,r),e.removeChild(r)}});return n.call(this,e).each(function(n){r[n].call(t.call(this))})}}(),$.fn.paginate=function(n){return new l(this,n)}}();
//# sourceMappingURL=jquery-paginator.min.js.map
