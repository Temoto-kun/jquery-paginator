!function(){var n=function(n,t){function e(){var e,a,d,o=n.find(".model").find(".header"),s=o.length;s<1||(d=t%s,e=o.eq(d).clone(!0,!0),e.hasClass("terminal")&&t>0||(a=$("<div>"),a.addClass("margin"),e.children().each(function(){a.append(this)}),e.append(a),i.prepend(e),setTimeout(function(){r.css("margin-top",e.height())})))}function a(){var e,a,d,o=n.find(".model").find(".footer"),s=o.length;s<1||(a=t%s,e=o.eq(a).clone(!0,!0),console.log(n.data("lastPageNumber")),e.hasClass("terminal")&&t<n.data("lastPageNumber")-1||(d=$("<div>"),d.addClass("margin"),e.children().each(function(){d.append(this)}),e.append(d),i.append(e),setTimeout(function(){r.css("margin-bottom",e.height())})))}var i=$("<div>"),r=$("<div>"),d=$("<div>");return d.addClass("margin"),t=t||n.data("lastPageNumber"),r.addClass("content").append(d),i.getContentHeight=function(){var n=this.find(".header"),t=this.find(".footer"),e=Math.max(n.length>0?n.height():0,parseInt(d.css("margin-top"))),a=Math.max(t.length>0?t.height():0,parseInt(d.css("margin-top")));return this.height()-e-a},i.needsBreaking=function(){return r.height()>this.getContentHeight()},i.setPageNumber=function(n){this.data("pageNumber",n),this.find(".header").remove(),this.find(".footer").remove(),e(),a()},i.addClass("page").append(r),i.setPageNumber(t),i};$.fn.paginate=function(){function t(n){return"."+n.split(" ").filter(function(n){return n.trim().length>0}).join(".")}function e(){f.find(t(v)).each(function(){var n=$(this),e=n.parent();n.parents(t(C)).length>0||(e.attr("data-order",0),n.data("$modelParent",e),b.push(e),m[0].find(".content").find(".margin").append(n))}),f.find("[data-order]").each(function(n){$(this).attr("data-order",n)}),u.find(".content").find(".margin").children().each(function(){var n=$(this),e=n.data("$modelParent");return e.hasClass(C)||e.parents().length<1||e.parents(t(C)).length>0?void n.remove():void("none"===n.css("float")&&n.attr("data-order",e.attr("data-order")))})}function a(){}function i(){function t(){var n=[];return m.forEach(function(t,e){var a=t.getContentHeight(),i=!1;return t.find(".content").find(".margin").children().each(function(){var n=$(this),e=n.position().top,r=n.height(),d=parseInt(t.find(".content").css("margin-top"))+a;i=i||e+r>d}),i?(t.addClass("-overflow"),void n.push(e)):void t.removeClass("-overflow")}),n}function e(t){t.forEach(function(t){var e=[],a=m[t],i=a.getContentHeight();for(a.find(".content").find(".margin").children().each(function(){var n=$(this),t=n.position().top,r=n.height(),d=parseInt(a.find(".content").css("margin-top")),o=d+i;t+r>o&&e.unshift(this)});e.length>0;)m[t+1]||u.append(m[t+1]=new n(c,t+1)),m[t+1].find(".content").find(".margin").prepend(e.shift()),c.data("lastPageNumber",t+1)})}var a;do e(a=t());while(a.length>0)}function r(){m.forEach(function(n){n.removeAttr("hidden")})}function d(){m.forEach(function(n,t){n.find(".content").find(".margin").children().length>0||t<1||n.attr("hidden","")})}function o(){c.trigger("paginator.pagenumberchange",{lastPageNumber:l}),c.data("lastPageNumber",l=0)}function s(){c.data("_isRendering",!0),o(),m[l]||u.append(m[l]=new n(c,l)),r(),e(),a(),i(),d(),setTimeout(function(){c.data("_isRendering",!1)})}function h(){c.data("_isRendering")||setTimeout(function(){s(),setTimeout(function(){c.trigger("paginator.modelchange",{})})})}var c=this,f=$("<div>"),g=$("<div>"),u=$("<div>"),p=new MutationObserver(h),l=0,m=[],v="page-added",C="page-deleted",b=[];g.addClass("watch").append(c.children()),p.observe(g[0],{childList:!0,attributes:!0,characterData:!0,subtree:!0}),f.addClass("model").append(g),u.addClass("view").append(m[0]),c.addClass("paginator-component").append(f).append(u),setTimeout(function(){s()})}}();