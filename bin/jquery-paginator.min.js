!function(){function n(n){return"."+n.split(" ").filter(function(n){return n.trim().length>0}).join(".")}function e(n){return n}function t(n,e){function t(){r.$el=r.$el||$("<div>").addClass(n),r.$margin=r.$margin=$("<div>").addClass(b),r.$el.append(r.$margin)}var a,r=this;r.append=function(n){r.$margin.append(n)},r.clear=function(){r.$margin.html("")},r.mountTo=function(n){a!==n&&(a=n,a.$el.append(r.$el))},r.getBlocks=function(){return r.$margin.children()},t()}function a(n){function e(){i.$el=i.$el||$("<div>").addClass(h),i.$el.append(i.header.$el).append(i.content.$el).append(i.footer.$el)}function a(){var n=i.header.$el,e=i.footer.$el,t=i.content.$margin,a=Math.max(n.length>0?n.height():0,parseInt(t.css("margin-top"))),r=Math.max(e.length>0?e.height():0,parseInt(t.css("margin-bottom")));return i.$el.height()-a-r}function r(){var n=i.header.$el,e=i.content.$margin,t=Math.max(n.length>0?n.height():0,parseInt(e.css("margin-top")));return t+a()}var o,i=this;i.header=new t(w,n),i.content=new t(m,n),i.footer=new t(k,n),i.hasBreaks=function(){return i.getOverflowBlocks().length>0},i.isBlank=function(){return i.content.$margin.children().length<1},i.getOverflowBlocks=function(){return i.content.getBlocks().filter(function(){var n=$(this),e=n.position().top,t=n.height();return e+t>r()})},i.unmount=function(){i.$el.remove()},i.mountTo=function(n){o!==n&&(o=n,o.view.$el.append(i.$el))},e()}function r(e){function t(){b.pages.forEach(function(n,e){r(w,n,e),r(k,n,e)})}function r(e,t,a){function r(n){n.on("change","input, textarea, select",function(n){})}var o,i=d.getIndexForPage(e,a),c=!1;if(i<0)switch(e){case w:return void t.header.clear();case k:return void t.footer.clear()}else{switch(e){case k:t.footer.clear(),o=d.getBlocks(e)(i),c=!0;break;case w:t.header.clear(),o=d.getBlocks(e)(i),c=!0;break;default:o=d.getBlocks(e)}switch(o.each(function(){var a=$(this),o=a;if(c&&(o=a.clone(!0,!0)),!(a.parents(n(v)).length>0)){switch($blockParent=a.parent(),$blockParent.addClass(T).attr(x,0),o.data(C,$blockParent).removeClass(g).addClass(p),e){case w:return r(o),void t.header.append(o);case k:return r(o),void t.footer.append(o)}E.content.append(o)}}),e){case w:t.content.$margin.css("margin-top",t.$el.find(n(e)).height());break;case k:t.content.$margin.css("margin-bottom",t.$el.find(n(e)).height())}}}function o(){d.$el.find(n(T)).each(function(n){$(this).attr(x,n)}),h.getBlocks("content").each(function(){var n=$(this),e=n.data(C);n.attr(x,e.attr(x))})}function i(){h.getBlocks("content").each(function(){var e,t,a=$(this);e=a.data(C),t=!e||e.hasClass(v)||e.parents(n(v)).length>0||!e.parents().is("body"),t&&a.remove()})}function c(n){var t=new a(e);n.blocks.each(function(){t.content.append($(this))}),b.pages.slice(n.pageIndex+1).forEach(function(n){t.content.append(n.content.getBlocks())}),h.addPage(t)}function s(){var n=null;return b.pages.forEach(function(e,t){e.hasBreaks()&&null===n&&(n={pageIndex:t,blocks:e.getOverflowBlocks()})}),n}function l(){var n=s();return null!==n&&(c(n),!0)}function u(){var n=[];b.pages.forEach(function(e,t){e.isBlank()&&n.push(t)}),n.reverse().forEach(function(n){b.pages.length<2||(b.pages[n].unmount(),b.pages.splice(n,1))})}function f(){h.$el.find(".content").find(".margin").children().sortElements(function(n,e){var t=parseInt($(n).attr(x)),a=parseInt($(e).attr(x));return t-a})}var d,h,b,B=this,E=new a(e),O=!1;B.render=function(){b.detachObserver(),b.pages.length<1&&h.addPage(E);var n;i(),r(m),o(),f();do n=l(),t();while(n);u();do n=l(),t();while(n);setTimeout(function(){b.attachObserver(),O=!1})},B.mountTo=function(n){b=n,d=b.model,h=b.view}}function o(e){function t(){c.$el=c.$el||$("<div>").addClass(u),c.$watch||(c.$watch=c.$watch||$("<div>").addClass(d),c.$el.append(c.$watch))}function a(e,t){return c.$watch.find(n(t?e+" "+B:e))}function r(n){return a(n).length}function o(n,e){var t,o=r(n),c=-1,s=i.view.getPageCount(),l=s-1,u=a(n);if(1===o)switch(n){case w:return 0===e?0:-1;case k:return e===l?0:-1}t=0;do{if(c=(c+1)%o,0===e&&n===w||e===l&&n===k)return u.each(function(n){$(this).hasClass(B)&&(c=n)}),c;u.eq(c).hasClass(B)&&c++,t++}while(t<e);return c}var i,c=this;c.hasTerminalBlockContainer=function(n){return a(n,!0).length>0},c.getIndexForPage=function(n,e){return c.hasTerminalBlockContainer(n)?o(n,e):e%r(n)},c.getBlocks=function(e){switch(e){case w:case k:return function(t){var r=a(e).eq(t),o=r.hasClass(B),i=r.find(n(g));return o?i.addClass(B):i.removeClass(B)}}return a(e).find(n(g))},c.getOrderedBlocks=function(n){return a(n).find("["+x+"]")},c.mountTo=function(n){i!==n&&(i=n,i.$el.append(c.$el))},t()}function i(e){function t(){r.$el=r.$el||$("<div>").addClass(f)}function a(n,e){return isNaN(e)||null===e?void r.paginator.pages.push(n):void r.paginator.pages.splice(e,0,n)}var r=this;r.paginator=null,r.getPageCount=function(){return r.paginator.pages.length},r.getBlocks=function(e){return r.$el.find(n(e)).children(n(b)).children()},r.addPage=function(n,e){return a(n,e),n.mountTo(r.paginator),n},r.mountTo=function(n){r.paginator=n,r.paginator.$el.append(r.$el)},t()}function c(t,a){function c(){B.renderer.render()}function u(n){console.log(n),O&&clearTimeout(O),O=setTimeout(function(){c()},250)}function f(n){B.$el&&B.$el.removeClass(s),B.$el=n,B.$el.hasClass(s)||B.$el.addClass(s).removeClass(l)}function d(){var e;B.model.mountTo(B),e=B.$el.find([n(w),n(m),n(k)].join(",")),B.model.$watch.append(e)}function h(){B.view.mountTo(B)}function g(){B.renderer.mountTo(B)}function p(){E||(B.attachObserver(),E=!0)}function $(){x||(B.attachEventListeners(),x=!0)}function v(){p(),$()}function b(){c()}var C,B=this,T=new MutationObserver(u),x=!1,E=!1,O=null;return a=new e(a),B.model=new o(a),B.view=new i(a),B.renderer=new r(a),B.pages=B.pages||[],B.detachObserver=function(){T.disconnect()},B.attachObserver=function(){T.observe(B.model.$watch[0],{childList:!0,attributes:!0,characterData:!0,subtree:!0})},B.attachEventListeners=function(){console.log(B.model.$watch),B.model.$watch.on("change","input, select, textarea",function(n,e){var t;console.log("asdfasdfasdfasdfasdf"),E&&(t=n,t.data=e,u([t]))})},C=function(){return{observe:v,refresh:b}}(),f(t),d(),h(),g(),v(),t.data("paginator",C),C}var s="paginator-component",l="paginator-unpaginated",u="model",f="view",d="watch",h="page",g="page-block",p="page-added",v="page-deleted",m="content",w="header",k="footer",b="margin",C="parent",B="-terminal",T="block-parent",x="data-order";jQuery.fn.findShallow=function(n){return function n(e,t){var a=e.children();if(a.length){var r=a.filter(t);return r.length?r.first():n(a,t)}return $()}(this,n)},jQuery.fn.sortElements=function(){var n=[].sort;return function(e,t){t=t||function(){return this};var a=this.map(function(){var n=t.call(this),e=n.parentNode,a=e.insertBefore(document.createTextNode(""),n.nextSibling);return function(){if(e===this)throw new Error("You can't sort elements if any one is a descendant of another.");e.insertBefore(this,a),e.removeChild(a)}});return n.call(this,e).each(function(n){a[n].call(t.call(this))})}}(),$.fn.paginate=function(n){return new c(this,n)}}();
//# sourceMappingURL=jquery-paginator.min.js.map
